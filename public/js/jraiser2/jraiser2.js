/*!
 * jRaiser 2 Javascript Library
 * module loader - v1.0.0 (2013-05-21T16:57:05+0800)
 * http://jraiser.org/ | Released under MIT license
 */
!function(e,t){"use strict";function o(e){return e.replace(/^\s*\/\*[\s\S]*?\*\/\s*$/mg,"").replace(/^\s*\/\/.*$/mg,"")}function u(e){var t=[],n={},r;for(var i=0;i<e.length;i++)r=e[i],n[r]||(n[r]=!0,t.push(r));return t}function a(e){var t=/(?:^|[^.$])\brequire\s*\(\s*(["'])([^"'\s\)]+)\1\s*\)/g,n=[],r;e=o(e);while(r=t.exec(e))r[2]&&n.push(r[2]);return u(n)}function f(e){for(var t in e)return!1;return!0}function l(e){var t=0,n=arguments.length,r,i;while(++t<n){i=arguments[t];if(i!=null)for(r in i)e[r]=i[r]}return e}function c(e){return/^(?:[a-z]+):\/+/i.test(e)}function h(e){return e.replace(/([^:])\/{2,}/g,"$1/")}function p(e,t){var n=e.indexOf("?");return n!==-1&&(t&&(t.search=e.substr(n+1)),e=e.substr(0,n)),n=e.indexOf("#"),n!==-1&&(t&&(t.hash=e.substr(n+1)),e=e.substr(0,n)),e}function d(e,t){/^\/+/.test(e)?(t=r.appPath,e=e.substr(1)):/^\./.test(e)||(t=r.libPath),e=e.split("/");var n=t.split("/");for(var i=0;i<e.length;i++)e[i]===".."?!n[n.length-2]===""&&n.pop():e[i]!="."&&n.push(e[i]);return n.join("/")}function v(e,t){var n={},e=p(e,n).split("/"),i=e.pop()||"index",s=i.indexOf("."),o,u;s===-1?o=i:(o=i.substr(0,s),u=i.substr(s+1)),u=u||"js",r.debug&&!/-debug$/.test(o)&&(o+="-debug"),e.push(o+"."+u);var a=e.join("/");c(a)||(a=d(a,t||r.appPath)),n.search&&(a+="?"+n.search);var f=r.map;if(f)for(var l=0;l<f.length;l++)a=a.replace(f[l][0],f[l][1]);return a}function b(e,t,n){this._factory=t,this._deps=n,e?this.setId(e):b.anonymous=this}function S(e){var t=document.createElement("div");return t.innerHTML='<a href="'+e+'"></a>',e=t.firstChild.href,t=null,e}function x(e){return c(e)||(e=S(e)),e=e.replace(/\/+$/,""),e}var n=e.jraiser={},r={},i=e.opera!=null&&e.opera.toString()==="[object Opera]",s=e.attachEvent&&!i,m={_scriptParent:document.getElementsByTagName("head")[0],_loaded:{},getExecutingScript:function(){if(this._currentlyAddingScript)return this._currentlyAddingScript;var e=this._executingScript;if(e&&e.readyState==="interactive")return e;var t=this._scriptParent.getElementsByTagName("script"),n;for(var r=0;r<t.length;r++){n=t[r];if(n.readyState==="interactive")return this._executingScript=n}},load:function(e,t,n){var i=this,s=i._loaded[e];if(s)s===2&&t&&t(o);else{var o=document.createElement("script");o.src=e,i._loaded[e]=1,r.charset&&(o.charset=r.charset),o.async="async";if(n)for(var u in n)o.setAttribute(u,n[u]);o.onload=o.onreadystatechange=o.onerror=function(){if(!o.readyState||"loaded"===o.readyState||"complete"===o.readyState)i._loaded[e]=2,i._executingScript=null,o.onload=o.onreadystatechange=o.onerror=null,t&&t(o),o.parentNode.removeChild(o),o=null},this._currentlyAddingScript=o,i._scriptParent.insertBefore(o,i._scriptParent.firstChild),this._currentlyAddingScript=null}}},g={_chain:{},add:function(e,t){var n=this._chain[t]=this._chain[t]||[];n.push(e)},get:function(e){return this._chain[e]},clear:function(e){delete this._chain[e]}},y={};l(b.prototype,{setId:function(e){var t=this;if(t._id)throw new Error("module id cannot be changed");t._id=e,t.isTask()||(e=p(e)),b.all[e]=t,b.anonymous===t&&delete b.anonymous;var n;t.isTask()?t._dirname="":(n=e.lastIndexOf("/"),t._dirname=n===e.length-1?e:e.substr(0,e.lastIndexOf("/")));var r=t._deps;if(r){var i;r[r.length-1]===null&&(i=!0,r.length-=1);var s=t._readyStates={},o;for(var u=0;u<r.length;u++){r[u]=v(r[u],t._dirname),n=r[u],r[u]=p(n),o=b.all[r[u]];if(!o||!o.isReady())g.add(e,r[u]),s[r[u]]=n,i&&(y[r[u]]=!0)}if(f(s))delete t._readyStates;else if(!y[t._id])for(o in s)b.load(s[o])}t._checkReady()},_checkReady:function(){if(this.isReady())if(this.isTask())w.tryExecute();else{var e=g.get(this._id);if(e){for(var t=e.length-1,n;t>=0;t--)n=b.all[e[t]],n&&n.notifyReady(this._id);g.clear(this._id)}}},id:function(){return this._id},isTask:function(){return/^#\d+#$/.test(this._id)},isReady:function(){return this._readyStates===t},notifyReady:function(e){var t=this._readyStates;t&&(delete t[e],f(t)&&delete this._readyStates),this._checkReady()},execute:function(){var t=this._deps,n=[];for(var r=t.length-1;r>=0;r--)n[r]=b.all[t[r]].exports();this._factory&&this._factory.apply(e,n)},exports:function(){var t=this,n=t._executedModule;if(n)return n.exports;n={id:t._id};if(typeof t._factory=="function"){n.exports={};var r=function(e){return b.require(e,t._dirname)};r.async=function(e,n){typeof e=="string"&&(e=[e]);for(var r=e.length-1;r>=0;r--)e[r]=v(e[r],t._dirname);E(e,n)},r.resolve=function(e){return v(e,t._dirname)};var i=t._factory.call(e,r,n.exports,n);!i||(n.exports=i)}else n.exports=t._factory;return t._executedModule=n,n.exports}}),l(b,{require:function(e,t){e=v(e,t);var n=b.all[p(e)];if(n)return n.exports();throw new Error("module "+e+" is not loaded")},load:function(e){var t=p(e);if(b.all[t])return;m.load(e,function(e){if(b.all[t])return;!s&&b.anonymous&&b.anonymous.setId(t);if(!b.all[t])throw new Error("module "+t+" does not exist")},{"data-dependent":"true"})},all:{}});var w={_autoId:0,_queue:[],add:function(e){e.setId(this._nextId()),this._queue.push(e)},tryExecute:function(){var e;while(e=this._queue[0]){if(!e.isReady())break;this._queue.shift(),delete b.all[e.id()],e.execute()}},_nextId:function(){return this._autoId++,"#"+this._autoId+"#"}};e.define=function(){var e,t,n,r=arguments;switch(r.length){case 1:n=r[0],t=a(n.toString());break;case 2:t=r[0],n=r[1];break;case 3:e=p(v(r[0])),t=r[1],n=r[2]}if(!e&&s){var i=m.getExecutingScript();i&&i.getAttribute("data-dependent")&&(e=p(i.src))}typeof t=="string"&&(t=[t]),new b(e,n,t)},n.cache=b.all;var E=e.require=function(e,t){typeof e=="string"&&(e=[e]),w.add(new b(null,t,e))};E.resolve=function(e){return v(e)},n.config=function(e){for(var t in e)r[t]=e[t];e.hasOwnProperty("libPath")&&(r.libPath=x(r.libPath)),e.hasOwnProperty("appPath")&&(r.appPath=x(r.appPath))},n.config({libPath:"./",appPath:"./",debug:function(){var t=!1,n=e.location.search;return/[?|&]debug(&|$)/.test(n)?t=!0:/[?|&]nondebug(&|$)/.test(n)&&(t=!1),t}()});var T=document.getElementsByTagName("script"),N;for(var C=T.length-1;C>=0;C--)if(/jraiser/i.test(T[C].src)){N=T[C].getAttribute("data-main");if(N){E(N);break}}T=null}(window)